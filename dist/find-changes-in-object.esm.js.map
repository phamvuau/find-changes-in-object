{"version":3,"file":"find-changes-in-object.esm.js","sources":["../src/main.js"],"sourcesContent":["import isEqual from 'lodash/isEqual'\nimport isPlainObject from 'lodash/isPlainObject'\nimport transform from 'lodash/transform'\n\n/**\n * Compare two objects and and return changes\n * @param  {Object} original object\n * @param  {Object} updated object\n * @return {Object} changes\n */\n\nfunction findChangesInObject (origin, updated) {\n  if (\n    origin == null ||\n    typeof origin !== 'object' ||\n    updated == null ||\n    typeof updated !== 'object'\n  ) {\n    return null\n  }\n  const changes = {}\n  Object.keys(origin).forEach(key => {\n    if (updated[key] === undefined) {\n      // key is removed\n      changes[key] = null\n    }\n  })\n  return transform(\n    updated,\n    (changes, value, key) => {\n      if (origin[key] === undefined) {\n        // key is added\n        changes[key] = value\n      } else if (!isEqual(value, origin[key])) {\n        changes[key] =\n          isPlainObject(value) && isPlainObject(origin[key])\n            ? findChangesInObject(origin[key], value)\n            : value\n      }\n    },\n    changes\n  )\n}\n\nexport default findChangesInObject\n"],"names":["findChangesInObject","origin","updated","changes","Object","keys","forEach","key","undefined","transform","value","isEqual","isPlainObject"],"mappings":";;;;;;;;;;;;;;;;;;;;AAIA;;;;;;;AAOA,SAASA,mBAAT,CAA8BC,MAA9B,EAAsCC,OAAtC,EAA+C;AAC7C,MACED,MAAM,IAAI,IAAV,IACA,QAAOA,MAAP,MAAkB,QADlB,IAEAC,OAAO,IAAI,IAFX,IAGA,QAAOA,OAAP,MAAmB,QAJrB,EAKE;AACA,WAAO,IAAP;AACD;;AACD,MAAMC,OAAO,GAAG,EAAhB;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYJ,MAAZ,EAAoBK,OAApB,CAA4B,UAAAC,GAAG,EAAI;AACjC,QAAIL,OAAO,CAACK,GAAD,CAAP,KAAiBC,SAArB,EAAgC;AAC9B;AACAL,MAAAA,OAAO,CAACI,GAAD,CAAP,GAAe,IAAf;AACD;AACF,GALD;AAMA,SAAOE,SAAS,CACdP,OADc,EAEd,UAACC,OAAD,EAAUO,KAAV,EAAiBH,GAAjB,EAAyB;AACvB,QAAIN,MAAM,CAACM,GAAD,CAAN,KAAgBC,SAApB,EAA+B;AAC7B;AACAL,MAAAA,OAAO,CAACI,GAAD,CAAP,GAAeG,KAAf;AACD,KAHD,MAGO,IAAI,CAACC,OAAO,CAACD,KAAD,EAAQT,MAAM,CAACM,GAAD,CAAd,CAAZ,EAAkC;AACvCJ,MAAAA,OAAO,CAACI,GAAD,CAAP,GACEK,aAAa,CAACF,KAAD,CAAb,IAAwBE,aAAa,CAACX,MAAM,CAACM,GAAD,CAAP,CAArC,GACIP,mBAAmB,CAACC,MAAM,CAACM,GAAD,CAAP,EAAcG,KAAd,CADvB,GAEIA,KAHN;AAID;AACF,GAZa,EAadP,OAbc,CAAhB;AAeD;;;;"}